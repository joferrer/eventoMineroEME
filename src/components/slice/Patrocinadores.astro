---
import { Image } from "astro:assets";
import LogoVerticalDark from "../../assets/icons/verticales/LogoVerticalDark.png";
import SliceTitulo from "../SliceTitulo.astro";

const logos = Array(6).fill(LogoVerticalDark);
---

<!-- Script para detectar el tema -->
<script>
  // Función para detectar si el tema actual es oscuro
  function isDarkMode() {
    if (typeof window !== "undefined") {
      return (
        document.documentElement.classList.contains("dark") ||
        (window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      );
    }
    return false;
  }

  // Aplicar tema al cargar la página
  function applyTheme() {
    const isDark = isDarkMode();
    const section = document.querySelector(".patrocinadores");
    if (section) {
      if (isDark) {
        section.classList.add("dark-theme");
      } else {
        section.classList.remove("dark-theme");
      }
    }
  }

  // Aplicar tema cuando la página carga
  document.addEventListener("DOMContentLoaded", applyTheme);

  // Escuchar cambios en el tema del sistema
  if (typeof window !== "undefined" && window.matchMedia) {
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", applyTheme);
  }

  // Observar cambios en la clase dark del documento
  if (typeof window !== "undefined") {
    const observer = new MutationObserver(applyTheme);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["class"],
    });
  }
</script>

<section class="patrocinadores">

  <SliceTitulo title="Patrocinadores" subtitle="El Evento EME puede llevarse a cabo gracias a la colaboración de…" />

  <div class="grid">
    {
      logos.map((logo, index) => (
        <div class="card">
          <Image
            src={logo}
            alt={`Patrocinador ${index + 1}`}
            width={80}
            height={80}
            fit="contain"
            loading="lazy"
          />
        </div>
      ))
    }
  </div>
</section>

<style>
  .patrocinadores {
    padding: 3rem 1rem;
    text-align: center;
    background: #f8fafc;
    color: #1e293b;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.3s ease;
  }

  .patrocinadores.dark-theme {
    background: #0f0f1a;
    color: white;
  }
  
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 1.5rem;
    justify-items: center;
    max-width: 600px;
    width: 100%;
  }

  .card {
    background: linear-gradient(
      to left,
      rgba(71, 85, 105, 0.08) 0%,
      #f1f5f9 30%,
      #ffffff 100%
    );
    padding: 1rem;
    width: 100px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid transparent;
    border-image: linear-gradient(
        to left,
        rgba(71, 85, 105, 0.4),
        rgba(71, 85, 105, 0)
      )
      1;
    border-radius: 0;
    box-shadow:
      inset -2px 0 10px rgba(71, 85, 105, 0.05),
      0 2px 4px rgba(0, 0, 0, 0.05);
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease,
      border-image-source 0.3s ease,
      background 0.3s ease;
  }

  .dark-theme .card {
    background: linear-gradient(
      to left,
      rgba(255, 255, 255, 0.08) 0%,
      #1a1a2e 30%,
      #0d0d14 100%
    );
    border-image: linear-gradient(
        to left,
        rgba(255, 255, 255, 0.3),
        rgba(255, 255, 255, 0)
      )
      1;
    box-shadow: inset -2px 0 10px rgba(255, 255, 255, 0.05);
  }

  .card:hover {
    transform: scale(1.05);
    box-shadow:
      inset -2px 0 12px rgba(71, 85, 105, 0.1),
      0 4px 12px rgba(0, 0, 0, 0.1),
      0 0 15px rgba(71, 85, 105, 0.15);
    border-image: linear-gradient(
        to left,
        rgba(71, 85, 105, 0.7),
        rgba(71, 85, 105, 0)
      )
      1;
  }

  .dark-theme .card:hover {
    transform: scale(1.05);
    box-shadow:
      inset -2px 0 12px rgba(255, 255, 255, 0.08),
      0 0 10px rgba(255, 255, 255, 0.15);
    border-image: linear-gradient(
        to left,
        rgba(255, 255, 255, 0.6),
        rgba(255, 255, 255, 0)
      )
      1;
  }

  @media (max-width: 768px) {
    .grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 480px) {
    .grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .patrocinadores {
      padding: 2rem 1rem;
    }
  }
</style>
